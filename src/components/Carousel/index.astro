---
import { Image } from 'astro:assets';
---

<section class="w-full bg-[#F9FAFB]">
  <div class="max-w-7xl mx-auto p-4">
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <!-- Sección 1 -->
      <div class="relative rounded-xl overflow-hidden">
        <img
          id="image1"
          src="src/assets/Pareja/F1.jpg"
          alt="Pareja 1"
          class="w-full h-full object-cover aspect-square transition-opacity duration-1000 opacity-100"
        />
      </div>
      <!-- Sección 2 -->
      <div class="relative rounded-xl overflow-hidden">
        <img
          id="image2"
          src="src/assets/Pareja/F7.jpg"
          alt="Pareja 2"
          class="w-full h-full object-cover aspect-square transition-opacity duration-1000 opacity-100"
        />
      </div>
      <!-- Sección 3 -->
      <div class="relative rounded-xl overflow-hidden">
        <img
          id="image3"
          src="src/assets/Pareja/F14.jpg"
          alt="Pareja 3"
          class="w-full h-full object-cover aspect-square transition-opacity duration-1000 opacity-100"
        />
        <div class="absolute top-2 right-2">
        </div>
      </div>
      <!-- Sección 4 -->
      <div class="relative rounded-xl overflow-hidden">
        <img
          id="image4"
          src="src/assets/Pareja/F21.jpg"
          alt="Pareja 4"
          class="w-full h-full object-cover aspect-square transition-opacity duration-1000 opacity-100"
        />
      </div>

      <!-- Sección 5 -->
      <div class="relative rounded-xl overflow-hidden col-span-2">
        <img
          id="image5"
          src="src/assets/Pareja/F28.jpg"
          alt="Pareja 5"
          class="w-full h-full object-cover aspect-[2/1] transition-opacity duration-1000 opacity-100"
        />
      </div>
      <!-- Sección 6 -->
      <div class="relative rounded-xl overflow-hidden">
        <img
          id="image6"
          src="src/assets/Pareja/F35.jpg"
          alt="Pareja 6"
          class="w-full h-full object-cover aspect-square transition-opacity duration-1000 opacity-100"
        />
      </div>
      <!-- Sección 7 -->
      <div class="relative rounded-xl overflow-hidden">
        <video
          autoplay
          loop
          muted
          id="image7"
          src="Public/pedidademano.mp4"
          class="w-full h-full object-cover aspect-square transition-opacity duration-1000 opacity-100"
        />
        <div class="absolute bottom-2 right-2">
          <a href="https://www.youtube.com/shorts/1wICenzg2eA" class="bg-white text-black px-3 py-1 rounded-lg text-sm font-medium">
            Ver Pedida de mano
          </a>
        </div>
      </div>
    </div>
  </div>
  <style>
    .grid {
      grid-auto-flow: dense;
    }
  </style>
</section>

<script>
  // Array con 43 imágenes de la pareja (actualizadas con las rutas correctas)
  const photos = [
    { title: 'Pareja 1', src: 'src/assets/Pareja/F1.jpg' },
    { title: 'Pareja 2', src: 'src/assets/Pareja/F2.jpg' },
    { title: 'Pareja 3', src: 'src/assets/Pareja/F3.jpg' },
    { title: 'Pareja 4', src: 'src/assets/Pareja/F4.jpg' },
    { title: 'Pareja 5', src: 'src/assets/Pareja/F5.jpg' },
    { title: 'Pareja 6', src: 'src/assets/Pareja/F6.jpg' },
    { title: 'Pareja 7', src: 'src/assets/Pareja/F7.jpg' },
    { title: 'Pareja 8', src: 'src/assets/Pareja/F8.jpg' },
    { title: 'Pareja 9', src: 'src/assets/Pareja/F9.jpg' },
    { title: 'Pareja 10', src: 'src/assets/Pareja/F10.jpg' },
    { title: 'Pareja 11', src: 'src/assets/Pareja/F11.jpg' },
    { title: 'Pareja 12', src: 'src/assets/Pareja/F12.jpg' },
    { title: 'Pareja 13', src: 'src/assets/Pareja/F13.jpg' },
    { title: 'Pareja 14', src: 'src/assets/Pareja/F14.jpg' },
    { title: 'Pareja 15', src: 'src/assets/Pareja/F15.jpg' },
    { title: 'Pareja 16', src: 'src/assets/Pareja/F16.jpg' },
    { title: 'Pareja 17', src: 'src/assets/Pareja/F17.jpg' },
    { title: 'Pareja 18', src: 'src/assets/Pareja/F18.jpg' },
    { title: 'Pareja 19', src: 'src/assets/Pareja/F19.jpg' },
    { title: 'Pareja 20', src: 'src/assets/Pareja/F20.jpg' },
    { title: 'Pareja 21', src: 'src/assets/Pareja/F21.jpg' },
    { title: 'Pareja 22', src: 'src/assets/Pareja/F22.jpg' },
    { title: 'Pareja 23', src: 'src/assets/Pareja/F23.jpg' },
    { title: 'Pareja 24', src: 'src/assets/Pareja/F24.jpg' },
    { title: 'Pareja 25', src: 'src/assets/Pareja/F25.jpg' },
    { title: 'Pareja 26', src: 'src/assets/Pareja/F26.jpg' },
    { title: 'Pareja 27', src: 'src/assets/Pareja/F27.jpg' },
    { title: 'Pareja 28', src: 'src/assets/Pareja/F28.jpg' },
    { title: 'Pareja 29', src: 'src/assets/Pareja/F29.jpg' },
    { title: 'Pareja 30', src: 'src/assets/Pareja/F30.jpg' },
    { title: 'Pareja 31', src: 'src/assets/Pareja/F31.jpg' },
    { title: 'Pareja 32', src: 'src/assets/Pareja/F32.jpg' },
    { title: 'Pareja 33', src: 'src/assets/Pareja/F33.jpg' },
    { title: 'Pareja 34', src: 'src/assets/Pareja/F34.jpg' },
    { title: 'Pareja 35', src: 'src/assets/Pareja/F35.jpg' },
    { title: 'Pareja 36', src: 'src/assets/Pareja/F36.jpg' },
    { title: 'Pareja 37', src: 'src/assets/Pareja/F37.jpg' },
    { title: 'Pareja 38', src: 'src/assets/Pareja/F38.jpg' },
    { title: 'Pareja 39', src: 'src/assets/Pareja/F39.jpg' },
    { title: 'Pareja 40', src: 'src/assets/Pareja/F40.jpg' },
    { title: 'Pareja 41', src: 'src/assets/Pareja/F41.jpg' },
    { title: 'Pareja 42', src: 'src/assets/Pareja/F42.jpg' },
    { title: 'Pareja 43', src: 'src/assets/Pareja/F43.jpg' }
  ];

  // Dividir las 43 fotos en 7 grupos
  const sections = [
    photos.slice(0, 7),
    photos.slice(7, 14),
    photos.slice(14, 21),
    photos.slice(21, 28),
    photos.slice(28, 35),
    photos.slice(35, 42), 
    photos.slice(41, 43), 
  ];

  let currentIndices = [0, 0, 0, 0, 0, 0, 0]; // Índices para cada sección

  // Función para cambiar la imagen de una sección
  const changeImage = (sectionIndex: number, imageId: string): void => {
    currentIndices[sectionIndex] = (currentIndices[sectionIndex] + 1) % sections[sectionIndex].length;
    const imageElement = document.getElementById(imageId) as HTMLImageElement;
    
    console.log(sections[sectionIndex])
    if (imageElement) {
      imageElement.classList.add('opacity-0');
      imageElement.classList.remove('opacity-100');
      setTimeout(() => {
        const src = sections[sectionIndex][currentIndices[sectionIndex]].src;
        imageElement.src = src
        imageElement.alt = sections[sectionIndex][currentIndices[sectionIndex]].title;
        imageElement.classList.add('opacity-100');
        imageElement.classList.remove('opacity-0');
      }, 1000); // Lento cambio de imagen
    }
    console.log(sections[sectionIndex])
  };

  // Intervalos para el cambio de imagen cada 5 segundos para cada sección
  setInterval(() => changeImage(0, 'image1'), 5000);
  setInterval(() => changeImage(1, 'image2'), 6000);
  setInterval(() => changeImage(2, 'image3'), 7000);
  setInterval(() => changeImage(3, 'image4'), 8000);
  setInterval(() => changeImage(4, 'image5'), 9000);
  setInterval(() => changeImage(5, 'image6'), 10000);
</script>
